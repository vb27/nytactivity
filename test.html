<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Document</title>
</head>
<body>
    <!-- text input search term, number, start, end -->
    <!-- https://api.nytimes.com/svc/search/v2/articlesearch.json?q={search input}&facet_fields=source&facet=true&begin_date={start input}&end_date={end input}&api-key=nCzjGyt28CsMePzheFrADtAf6eOW5eIp -->
    <form>
        <input id="term" />
        <input id="record-number" />
        <input id="start-year"/>
        <input id="end-year" />
        <button id="searchButton">Search</button>
    </form>

    <div id="top-articles"></div>

    <script type="text/javascript">


    $("#searchButton").click(function(event){
        event.preventDefault();
        
        var searchTerm = $("#term").val();
        var numRecords = parseInt($("#record-number").val())
        var beginDate = $("#start-year").val();
        var endDate = $("#end-year").val();
        
        var queryURL = "https://api.nytimes.com/svc/search/v2/articlesearch.json?q=" + searchTerm + "&facet_fields=source&facet=true&begin_date=" + beginDate + "0101&end_date" + endDate + "1231&api-key=nCzjGyt28CsMePzheFrADtAf6eOW5eIp"

        $.ajax({
        url: queryURL,
        method: "GET"
        }).then(function(article) {
            console.log(article)
            console.log(numRecords)
          for (i=0; i<numRecords; i++){
            var articleTitle = article.response.docs[i].abstract
            var articleURL = article.response.docs[i].web_url
            
            var renderArticle = $("<a>")
            renderArticle.text(articleTitle)
            renderArticle.attr("href", articleURL)

            $("#top-articles").append(renderArticle)
          }
        })

    })
    
    </script>
</body>
</html>